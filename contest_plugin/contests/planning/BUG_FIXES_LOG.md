# Лог исправлений ошибок

## Оптимизация функциональности снятия дисквалификации счета

**Дата**: 15.06.2023

**Описание изменений**:
- Оптимизирован процесс снятия дисквалификации счета участника конкурса
- Кнопка "Проверить на дисквалификацию" теперь автоматически снимает дисквалификацию, если счет соответствует всем условиям
- Удалена отдельная кнопка "Снять дисквалификацию", так как ее функционал интегрирован в кнопку проверки
- Добавлен параметр `auto_remove` в AJAX-запрос проверки дисквалификации
- Добавлена автоматическая перезагрузка страницы после успешного снятия дисквалификации
- Улучшены сообщения о статусе операции для пользователя

**Изменённые файлы**:
- `contests/frontend/js/frontend.js` - модифицирован обработчик кнопки проверки дисквалификации
- `contests/public/class-contest-ajax.php` - добавлена функциональность автоматического снятия дисквалификации
- `contests/templates/single-account.php` - удалена отдельная кнопка снятия дисквалификации

**Примечания**: 
- Изменения не затрагивают существующую структуру базы данных
- Функциональность снятия дисквалификации доступна только владельцу счета и администраторам
- При успешном снятии дисквалификации информация записывается в лог системы

## Функциональность автоматического закрытия регистрации

**Дата**: 04.05.2025

**Описание изменений**:
- Добавлена функциональность автоматического закрытия регистрации в конкурсе при достижении даты окончания регистрации
- Создан новый Cron-обработчик, который проверяет раз в час все конкурсы с открытой регистрацией
- При наступлении даты окончания регистрации статус меняется с "Открыта" на "Закрыта"
- Добавлены проверки статуса регистрации в форму регистрации и AJAX-обработчик
- При закрытой регистрации выводится соответствующее сообщение и блокируется возможность регистрации счетов

**Изменённые файлы**:
- `contests/includes/class-cron-manager.php` - добавлено новое Cron-задание
- `contests/ft-trader-contest.php` - добавлен обработчик Cron для проверки статуса регистрации
- `contests/templates/parts/registration-form.php` - добавлена проверка статуса регистрации
- `contests/templates/single-contest.php` - добавлено условие для отображения формы регистрации
- `contests/public/class-contest-ajax.php` - добавлена проверка статуса регистрации в AJAX-обработчике

**Примечания**: 
- Изменения не затрагивают существующую структуру базы данных
- Обработчик Cron-задания выполняется раз в час
- В случае успешного изменения статуса регистрации, информация записывается в лог 