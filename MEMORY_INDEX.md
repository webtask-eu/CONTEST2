# MEMORY_INDEX.md - Индекс проекта

Этот файл содержит общую структуру и ключевые точки входа в проект CONTEST2.

## Основные компоненты

- **MT4CONTESTSCRIPT**: MQL4 скрипты для MetaTrader 4.
  - Основной скрипт: `AccountInfoExport2.mq4`
- **PLUGIN (WordPress)**: Плагин для управления конкурсами.
  - Основной файл: `contests/ft-trader-contest.php`
  - Документация: `PLUGIN/contests/documentation.md`
- **SERVERAPI (Python Flask)**: Серверное API.
  - Точка входа: `wsgi.py`
  - Маршруты: `app/routes.py`
- **WEBAPI (PHP)**: Проксирующий PHP API.
  - Основной файл: `api.php`

## Сервисные файлы и документация

- `documentation.md`: Общая документация проекта.
- `planning/`: Директория с документацией по разработке:
  - `BUG_FIXES_LOG.md`: Лог исправлений.
  - `ARCHITECTURE.md`: Описание архитектуры.
  - `ROADMAP.md`: План развития.
  - `CSS_GUIDE.md`: Стандарты CSS.

## Ключевые технологии

- MQL4
- Python (Flask)
- PHP
- WordPress
- JavaScript
- CSS
- HTML

## Документация
- `README.md` - Общее описание проекта
- `planning/` - Директория с документацией разработки
  - `planning/BUG_FIXES_LOG.md` - Лог исправлений ошибок
  - `planning/ARCHITECTURE.md` - Описание архитектуры
  - `planning/ROADMAP.md` - План развития проекта
  - `planning/CSS_GUIDE.md` - Стандарты CSS

## Скрипты утилиты
- `dump_structure.sh` - Скрипт для дампа структуры проекта
- `dump_code.sh` - Скрипт для дампа кода проекта
- `dump_frontend_code.sh` - Скрипт для дампа фронтенд кода

## Особенности системы

### Контроль нагрузки и одновременных запросов
Система включает механизм контроля одновременных запросов к API для предотвращения перегрузки:

1. **Класс FT_API_Config**:
   - `get_api_url()` - Получает URL API на основе настроек (прямое или через WebAPI)
   - `can_send_request()` - Проверяет возможность отправки нового запроса к API
   - `request_completed()` - Отмечает запрос как завершенный, освобождая слот
   - `reset_active_requests()` - Сбрасывает счетчик активных запросов

2. **Настройки ограничения запросов**:
   - Максимальное количество одновременных запросов (по умолчанию 2)
   - Доступны в админ-панели WordPress: Настройки → Настройки API конкурсов

3. **Обработка превышения лимита**:
   - Пользователи получают понятное сообщение о необходимости подождать
   - Автоматическая очередь запросов при массовом обновлении
   - Обработка исключений с корректным освобождением слотов 